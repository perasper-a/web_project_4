!function(){"use strict";class e{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popup.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}))}}const t=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkRes(e){return e.ok?e.json():Promise.reject(e.status)}getUserInfo(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._checkRes)}getCards(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then(this._checkRes)}editProfile(e){let{name:t,about:s}=e;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkRes)}addCard(e){let{name:t,link:s}=e;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkRes)}addLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then(this._checkRes)}removeLike(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then(this._checkRes)}editAvatar(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkRes)}deleteCard(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then(this._checkRes)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"bccf616c-d32a-4841-af70-282e4f295a5b","content-type":"application/json"}});var s=class{constructor(e,t,s){this.settings=e,this.formElement=t,this._inputList=s,this._buttonEl=this.formElement.querySelector(this.settings.submitButtonSelector)}resetFormErrors(){this._inputList.forEach((e=>{this._hideInputError(e)}))}_hasValidInputs=()=>this._inputList.every((e=>!0===e.validity.valid));_enableButton(e){e.classList.remove(this.settings.inactiveButtonClass),e.disabled=!1}disableButton(e){e.classList.add(this.settings.inactiveButtonClass),e.disabled=!0}_toggleButton=()=>{this._hasValidInputs()?this._enableButton(this._buttonEl):this.disableButton(this._buttonEl)};_showInputError=e=>{const{inputErrorClass:t}=this.settings;this.formElement.querySelector(`#${e.id}-error`).textContent=e.validationMessage,e.classList.add(t)};_hideInputError=e=>{const{inputErrorClass:t}=this.settings;this.formElement.querySelector(`#${e.id}-error`).textContent="",e.classList.remove(t)};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_setEventListener=()=>{const{inputSelector:e}=this.settings;this._inputList=[...this.formElement.querySelectorAll(e)],this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))};enableValidation(){this.formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListener(this.formElement,this.settings)}};class r{constructor(e,t,s,r,n,i){this._data=e,this._cardTemplateSelector=s,this._handleImageClick=r,this._likes=e.likes,this._id=e._id,this._handleLikeButton=n,this._userId=t,this._handleDeleteClick=i,this._ownerId=e.owner._id}getId(){return this._id}_getTemplate(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".card")}removeCard=()=>{this._cardElement.remove(),this._cardElement=null};isLiked(){return this._likes.some((e=>e._id===this._userId))}renderLikes(e){this._likes=e,this.isLiked()?this._cardLikeButton.classList.add("card__like-button_filled"):this._cardLikeButton.classList.remove("card__like-button_filled")}createCard=()=>{this._cardElement=this._getTemplate().cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardDeleteButton=this._cardElement.querySelector(".card__trash-button"),this._cardLikeButton=this._cardElement.querySelector(".card__like-button");const e=this._likes.length;return this._cardElement.querySelector(".card__likes-count").textContent=e,this._cardImage.style.backgroundImage=`url(${this._data.link})`,this._cardElement.querySelector(".card__title").textContent=this._data.name,this._addEventListeners(),this.renderLikes(this._likes),this._userId!==this._ownerId&&(this._cardElement.querySelector(".card__trash-button").style.display="none"),this._cardElement};_addEventListeners=()=>{this._cardImage.addEventListener("click",(()=>this._handleImageClick())),this._cardDeleteButton.addEventListener("click",(()=>this._handleDeleteClick(this))),this._cardLikeButton.addEventListener("click",this._handleLikeButton)}}class n extends e{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._submitButton=this._popup.querySelector(".form__button")}_getInputValues(){const e={};return[...this._form.querySelectorAll(".form__input")].forEach((t=>{const s=t.name,r=t.value;e[s]=r})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())}))}changeHandleSubmit(e){this._handleSubmit=e}changeText(e){this._submitButton.textContent=e}close(){super.close(),this._form.reset()}}const i=document.querySelector(".profile__name-button"),o=document.querySelector(".profile__button-add"),a=document.querySelector(".cards__list"),l=document.querySelector(".popup__form_profile"),c=document.querySelector(".popup__form_card"),h=document.querySelector(".form__input_type_name"),d=document.querySelector(".form__input_type_job"),_=document.querySelector(".profile__image"),u=document.querySelector(".popup_type_avatar-change"),p={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type-error",errorClass:"form__input-error"};let m;Promise.all([t.getUserInfo(),t.getCards()]).then((e=>{let[t,s]=e;m=t._id,k.setUserInfo(t.name,t.about),k.setAvatar(t.avatar),L.renderItems(s)})).catch(console.log);const f=new n(".popup_type_add-card",(e=>{f.changeText("saving..."),t.addCard({name:e.title,link:e.link}).then((e=>{y(e,a),f.close()})).catch(console.log).finally((()=>{f.changeText("save")}))})),b=new n(".popup_type_profile",(e=>{b.changeText("saving..."),t.editProfile({name:e.name,about:e.job}).then((e=>{k.setUserInfo(e.name,e.about),b.close()})).catch(console.log).finally((()=>{b.changeText("save")}))})),E=new class extends e{constructor(e,t){super(e),this._image=document.querySelector(".popup__image"),this._caption=document.querySelector(".popup__image-caption")}open(e,t){this._image.src=t,this._image.alt="image view",this._caption.textContent=e,super.open()}}(".popup_type_preview"),v=new n(".popup_type_avatar-change",(e=>{t.editAvatar(e.link).then((e=>{k.setUserInfo(e.name,e.about,e.avatar),v.close()})).catch(console.log)})),g=new class extends e{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._submitButton=this._popup.querySelector(".form__button")}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}changeHandleSubmit(e){this._handleSubmit=e}changeText(e){this._submitButton.textContent=e}close(){super.close(),this._form.reset()}}(".popup_type_confirm-delete"),k=new class{constructor(e){let{profileNameSelector:t,profileJobSelector:s,userAvatarSelector:r}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._avatarEl=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}setAvatar(e){this._avatarEl.src=e}}({profileNameSelector:".profile__name-info",profileJobSelector:".profile__info-job",userAvatarSelector:".profile__image"}),y=e=>{const s=new r(e,m,"#card-template",(()=>{E.open(e.name,e.link)}),(()=>(e=>{e.isLiked()?t.removeLike(e.getId()).then((t=>{e.renderLikes(t.likes)})).catch(console.log):t.addLike(e.getId()).then((t=>{e.renderLikes(t.likes)}))})(s)),(()=>(e=>{g.open(),g.changeHandleSubmit((()=>{g.changeText("loading..."),t.deleteCard(e.getId()).then((()=>{e.removeCard(),g.close()})).finally((()=>{g.changeText("yes")}))}))})(s))),n=s.createCard();L.addItem(n)},L=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({renderer:y},".cards__list"),S=new s(p,l),C=new s(p,c),I=new s(p,u);S.enableValidation(),C.enableValidation(),I.enableValidation(),v.setEventListeners(),E.setEventListeners(),g.setEventListeners(),b.setEventListeners(),f.setEventListeners(),i.addEventListener("click",(function(){const e=k.getUserInfo();b.open(),h.value=e.name,d.value=e.job,S.resetFormErrors()})),o.addEventListener("click",(function(){f.open(),C.resetFormErrors(c,p)})),_.addEventListener("click",(()=>{v.open(),I.resetFormErrors()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVV5RixHQUV4RDBDLEVBQXFCeEcsbUJBQ3JCMEcsRUFBcUIxRyxtQkFDckIyRyxFQUFvQjNHLG1CQUdwQnFGLEVBQWtCeEosb0JBQ2xCbUosRUFBV25KLG9CQUNYeUosRUFBbUJ6SixvQkFDbkJpSixFQUFnQmpKLG9CQUNoQjhJLEVBQWE5SSxvQkFHYjBILEVBQW9CN0gsaUJBQWlCLFNBQVMsV0FDNUMsTUFBTWtMLEVBQWN6QyxFQUFTckgsY0FDN0JnSSxFQUFnQnZKLE9BRWhCcUksRUFBVVgsTUFBUTJELEVBQVl4SixLQUM5QnlHLEVBQVNaLE1BQVEyRCxFQUFZN0IsSUFDN0J5QixFQUFxQjdILGlCQUN2QixJQUVBNkUsRUFBdUI5SCxpQkFBaUIsU0FBUyxXQUMvQ2lKLEVBQWFwSixPQUNibUwsRUFBcUIvSCxnQkFBZ0JnRixFQUFrQnRGLEVBRXpELElBQ0FKLEVBQU92QyxpQkFBaUIsU0FBUyxLQUMvQjJKLEVBQWtCOUosT0FJbEJvTCxFQUFvQmhJLGlCQUFpQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3Byb2plY3RlaWdodC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcm9qZWN0ZWlnaHQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3Byb2plY3RlaWdodC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJvamVjdGVpZ2h0Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3Byb2plY3RlaWdodC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3Byb2plY3RlaWdodC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5cIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgX2NoZWNrUmVzKHJlcykge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlcyk7XHJcbiAgICB9XHJcbiAgICBnZXRDYXJkcygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkc1wiLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlcyk7XHJcbiAgICB9XHJcbiAgICBlZGl0UHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgYWJvdXQsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXMpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIGxpbmssXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXMpO1xyXG4gICAgfVxyXG4gICAgYWRkTGlrZShpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgaWQsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlcyk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMaWtlKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHMvbGlrZXMvXCIgKyBpZCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzKTtcclxuICAgIH1cclxuICAgIGVkaXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGF2YXRhcixcclxuICAgICAgICB9KSxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlcyk7XHJcbiAgICB9XHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL1wiICsgY2FyZElkLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuICBleHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTMtZW5cIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCJiY2NmNjE2Yy1kMzJhLTQ4NDEtYWY3MC0yODJlNGYyOTVhNWJcIixcclxuICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICB9LFxyXG59KTsiLCIvLyBpbXBvcnRzXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50LCBpbnB1dFNlbGVjdG9yKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBpbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2J1dHRvbkVsID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cbiAgcmVzZXRGb3JtRXJyb3JzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhc1ZhbGlkSW5wdXRzID0gKCkgPT5cbiAgICB0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSk7XG5cbiAgX2VuYWJsZUJ1dHRvbihidXR0b24pIHtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG4gIGRpc2FibGVCdXR0b24oYnV0dG9uKSB7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIF90b2dnbGVCdXR0b24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXRzKCkpIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbih0aGlzLl9idXR0b25FbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbih0aGlzLl9idXR0b25FbCk7XG4gICAgfVxuICB9O1xuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcyB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICBjb25zdCBlcnJvckVsID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcyB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICBjb25zdCBlcnJvckVsID0gdGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XG4gIH07XG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXQpID0+IHtcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9XG4gIH07XG4gIF9zZXRFdmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3RvciB9ID0gdGhpcy5zZXR0aW5ncztcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIodGhpcy5mb3JtRWxlbWVudCwgdGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICB1c2VySWQsXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVMaWtlQnV0dG9uLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrXG4gICkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICB9XG4gIGdldElkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbiAgfVxuICByZW1vdmVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBpc0xpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgfVxuXG4gIHJlbmRlckxpa2VzKG5ld0xpa2VzKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcbiAgICBjb25zdCBjYXJkTGlrZWRCeUN1cnJlbnRVc2VyID0gdGhpcy5pc0xpa2VkKCk7XG4gICAgaWYgKGNhcmRMaWtlZEJ5Q3VycmVudFVzZXIpIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9maWxsZWRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9maWxsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgLy8gY3JlYXRlIGNhcmRcbiAgY3JlYXRlQ2FyZCA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCkuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX190cmFzaC1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICBjb25zdCBsaWtlc0Ftb3VudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICBjb25zdCBjYXJkTGlrZUNvdW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlcy1jb3VudFwiKTtcbiAgICBjYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gbGlrZXNBbW91bnQ7XG4gICAgdGhpcy5fY2FyZEltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9kYXRhLmxpbmt9KWA7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0aGlzLl9kYXRhLm5hbWU7XG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMucmVuZGVyTGlrZXModGhpcy5fbGlrZXMpO1xuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpLnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICBcIm5vbmVcIjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9O1xuXG4gIC8vIHByaXZhdGUgZXZlbnRzXG4gIF9hZGRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soKSk7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKV07XG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBpbnB1dC5uYW1lO1xuICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG4gIGNoYW5nZUhhbmRsZVN1Ym1pdChuZXdTdWJtaXQpIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBuZXdTdWJtaXQ7XG4gIH1cbiAgY2hhbmdlVGV4dCh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBidXR0b25zIGFuZCBvdGhlciBET00gZWxlbWVudHNcblxuZXhwb3J0IGNvbnN0IG9wZW5FZGl0TW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19uYW1lLWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IG9wZW5BZGRDYXJkTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19idXR0b24tYWRkXCJcbik7XG5leHBvcnQgY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuLy8gRm9ybXNcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3Byb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fY2FyZFwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XG5leHBvcnQgY29uc3QgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYXZhdGFyLWNoYW5nZVwiKTtcbiIsIi8vIGltcG9ydHNcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgb3BlbkVkaXRNb2RhbEJ1dHRvbixcbiAgb3BlbkFkZENhcmRNb2RhbEJ1dHRvbixcbiAgY2FyZHNMaXN0LFxuICBwcm9maWxlTW9kYWxGb3JtLFxuICBhZGRDYXJkTW9kYWxGb3JtLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0Sm9iLFxuICBhdmF0YXIsXG4gIGF2YXRhcldpbmRvdyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBzZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZS1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG59O1xuXG4vLyBwcm9taXNlXG5sZXQgdXNlcklkO1xuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZHMoKV0pXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmxvZyk7XG5cbi8vIEhhbmRsZXJzXG5jb25zdCBoYW5kbGVBZGRDYXJkU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLmNoYW5nZVRleHQoXCJzYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC5hZGRDYXJkKHsgbmFtZTogZGF0YVtcInRpdGxlXCJdLCBsaW5rOiBkYXRhLmxpbmsgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKHJlcywgY2FyZHNMaXN0KTtcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUubG9nKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cC5jaGFuZ2VUZXh0KFwic2F2ZVwiKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgYWRkUHJvZmlsZVBvcHVwLmNoYW5nZVRleHQoXCJzYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC5lZGl0UHJvZmlsZSh7IG5hbWU6IGRhdGEubmFtZSwgYWJvdXQ6IGRhdGEuam9iIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XG4gICAgICBhZGRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmxvZylcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRQcm9maWxlUG9wdXAuY2hhbmdlVGV4dChcInNhdmVcIik7XG4gICAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0ID0gKGRhdGEpID0+IHtcbiAgYXBpXG4gICAgLmVkaXRBdmF0YXIoZGF0YS5saW5rKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQsIHJlcy5hdmF0YXIpO1xuICAgICAgYXZhdGFyQ2hhbmdlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XG59O1xuXG5jb25zdCBoYW5kbGVEZWxldGVDbGljayA9IChjYXJkKSA9PiB7XG4gIGNvbmZpcm1EZWxldGVQb3B1cC5vcGVuKCk7XG5cbiAgY29uZmlybURlbGV0ZVBvcHVwLmNoYW5nZUhhbmRsZVN1Ym1pdCgoKSA9PiB7XG4gICAgY29uZmlybURlbGV0ZVBvcHVwLmNoYW5nZVRleHQoXCJsb2FkaW5nLi4uXCIpO1xuXG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmdldElkKCkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jaGFuZ2VUZXh0KFwieWVzXCIpO1xuICAgICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgaGFuZGxlTGlrZUNsaWNrID0gKGNhcmQpID0+IHtcbiAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShjYXJkLmdldElkKCkpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNhcmQucmVuZGVyTGlrZXMocmVzLmxpa2VzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xuICB9IGVsc2Uge1xuICAgIGFwaS5hZGRMaWtlKGNhcmQuZ2V0SWQoKSkudGhlbigocmVzKSA9PiB7XG4gICAgICBjYXJkLnJlbmRlckxpa2VzKHJlcy5saWtlcyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIGluc3RhbmNlc1xuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIixcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdFxuKTtcblxuY29uc3QgYWRkUHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxuKTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3ByZXZpZXdcIik7XG5cbmNvbnN0IGF2YXRhckNoYW5nZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLnBvcHVwX3R5cGVfYXZhdGFyLWNoYW5nZVwiLFxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIi5wb3B1cF90eXBlX2NvbmZpcm0tZGVsZXRlXCJcbik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZS1pbmZvXCIsXG4gIHByb2ZpbGVKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9faW5mby1qb2JcIixcbiAgdXNlckF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbi8vIHJlbmRlcmNhcmRcbmNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBkYXRhLFxuICAgIHVzZXJJZCxcbiAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICAoKSA9PiB7XG4gICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YS5uYW1lLCBkYXRhLmxpbmspO1xuICAgIH0sXG4gICAgKCkgPT4gaGFuZGxlTGlrZUNsaWNrKGNhcmQpLFxuICAgICgpID0+IGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpXG4gICk7XG5cbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn07XG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oeyByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LCBcIi5jYXJkc19fbGlzdFwiKTtcblxuLy8gZm9ybVxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZU1vZGFsRm9ybSk7XG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkTW9kYWxGb3JtKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYXZhdGFyV2luZG93KTtcblxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIHNldEV2ZW5MaXN0ZW5lcnNcbmF2YXRhckNoYW5nZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIGV2ZW50SGFuZGxlcnNcbm9wZW5FZGl0TW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBhZGRQcm9maWxlUG9wdXAub3BlbigpO1xuXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVEYXRhLm5hbWU7XG4gIGlucHV0Sm9iLnZhbHVlID0gcHJvZmlsZURhdGEuam9iO1xuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldEZvcm1FcnJvcnMoKTtcbn0pO1xuXG5vcGVuQWRkQ2FyZE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybUVycm9ycyhhZGRDYXJkTW9kYWxGb3JtLCBzZXR0aW5ncyk7XG4gIC8vIGFkZENhcmRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oYWRkQ2FyZE1vZGFsRm9ybSwgc2V0dGluZ3MpO1xufSk7XG5hdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyQ2hhbmdlUG9wdXAub3BlbigpO1xuICAvLyBjb25zdCBhdmF0YXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgLy8gaW5wdXROYW1lLnZhbHVlID0gYXZhdGFyRGF0YS5saW5rO1xuXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRGb3JtRXJyb3JzKCk7XG59KTtcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1jYXB0aW9uXCIpO1xuICB9XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gXCJpbWFnZSB2aWV3XCI7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxuICBjaGFuZ2VIYW5kbGVTdWJtaXQobmV3U3VibWl0KSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gbmV3U3VibWl0O1xuICB9XG4gIGNoYW5nZVRleHQodGV4dCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlSm9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbiAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhckVsLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xuICB9XG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiUG9wdXAiLCJjb25zdHJ1Y3RvciIsInBvcHVwU2VsZWN0b3IiLCJ0aGlzIiwiX3BvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImUiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2NoZWNrUmVzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0Q2FyZHMiLCJlZGl0UHJvZmlsZSIsIl9yZWYiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZENhcmQiLCJfcmVmMiIsImxpbmsiLCJhZGRMaWtlIiwiaWQiLCJyZW1vdmVMaWtlIiwiZWRpdEF2YXRhciIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhdXRob3JpemF0aW9uIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsImlucHV0U2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiX2J1dHRvbkVsIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJyZXNldEZvcm1FcnJvcnMiLCJmb3JFYWNoIiwiaW5wdXQiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzVmFsaWRJbnB1dHMiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZW5hYmxlQnV0dG9uIiwiYnV0dG9uIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiZGlzYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJkYXRhIiwidXNlcklkIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbiIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX2RhdGEiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfdXNlcklkIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX293bmVySWQiLCJvd25lciIsImdldElkIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsInJlbW92ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJpc0xpa2VkIiwic29tZSIsInVzZXIiLCJyZW5kZXJMaWtlcyIsIm5ld0xpa2VzIiwiX2NhcmRMaWtlQnV0dG9uIiwiY3JlYXRlQ2FyZCIsImNsb25lTm9kZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZERlbGV0ZUJ1dHRvbiIsImxpa2VzQW1vdW50IiwibGVuZ3RoIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJfYWRkRXZlbnRMaXN0ZW5lcnMiLCJkaXNwbGF5IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9nZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsInZhbHVlIiwiY2hhbmdlSGFuZGxlU3VibWl0IiwibmV3U3VibWl0IiwiY2hhbmdlVGV4dCIsInRleHQiLCJyZXNldCIsIm9wZW5FZGl0TW9kYWxCdXR0b24iLCJvcGVuQWRkQ2FyZE1vZGFsQnV0dG9uIiwiY2FyZHNMaXN0IiwicHJvZmlsZU1vZGFsRm9ybSIsImFkZENhcmRNb2RhbEZvcm0iLCJpbnB1dE5hbWUiLCJpbnB1dEpvYiIsImF2YXRhcldpbmRvdyIsImVycm9yQ2xhc3MiLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsInNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiY29uc29sZSIsImxvZyIsImFkZENhcmRQb3B1cCIsInJlbmRlckNhcmQiLCJmaW5hbGx5IiwiYWRkUHJvZmlsZVBvcHVwIiwiam9iIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwic3JjIiwiYWx0IiwiYXZhdGFyQ2hhbmdlUG9wdXAiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUpvYlNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfYXZhdGFyRWwiLCJjYXJkIiwiaGFuZGxlTGlrZUNsaWNrIiwiY2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwicHJvZmlsZURhdGEiXSwic291cmNlUm9vdCI6IiJ9